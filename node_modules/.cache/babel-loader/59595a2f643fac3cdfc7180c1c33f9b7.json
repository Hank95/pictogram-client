{"ast":null,"code":"import _toConsumableArray from\"/Users/Henry1/Development/code/Mod2/pictogram-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/Henry1/Development/code/Mod2/pictogram-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/Henry1/Development/code/Mod2/pictogram-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/Henry1/Development/code/Mod2/pictogram-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import StyleBar from\"./StyleBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SketchPad=function SketchPad(_ref){var handleSave=_ref.handleSave;var canvasRef=useRef(null);var contextRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDrawing=_useState2[0],setIsDrawing=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),canvas=_useState4[0],setCanvas=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),title=_useState6[0],setTitle=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),points=_useState8[0],setPoints=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),pathAry=_useState10[0],setPathAry=_useState10[1];var _useState11=useState({color:\"black\",stroke:3}),_useState12=_slicedToArray(_useState11,2),formData=_useState12[0],setFormData=_useState12[1];var handleData=function handleData(e){setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},e.target.name,e.target.value));});};var handleChange=function handleChange(e){setTitle(e.target.value);};useEffect(function(){var newCanvas=canvasRef.current;newCanvas.width=500;newCanvas.height=500;newCanvas.style.width=\"\".concat(500,\"px\");newCanvas.style.height=\"\".concat(500,\"px\");newCanvas.style.border=\"3px solid black\";newCanvas.fillStyle=\"white\";setCanvas(newCanvas);},[]);useEffect(function(){if(canvas){var context=canvas.getContext(\"2d\");context.scale(1,1);context.lineCap=\"round\";context.strokeStyle=formData.color;context.lineWidth=formData.stroke;context.fillStyle=\"white\";contextRef.current=context;}},[canvas,formData.color,formData.stroke]);var startDrawing=function startDrawing(_ref2){var nativeEvent=_ref2.nativeEvent;var offsetX=nativeEvent.offsetX,offsetY=nativeEvent.offsetY;contextRef.current.beginPath();contextRef.current.moveTo(offsetX,offsetY);setIsDrawing(true);setPoints([]);};var endDrawing=function endDrawing(){contextRef.current.closePath();setIsDrawing(false);setPathAry(function(prevState){return[].concat(_toConsumableArray(prevState),[points]);});};var draw=function draw(_ref3){var nativeEvent=_ref3.nativeEvent;if(!isDrawing){return;}var offsetX=nativeEvent.offsetX,offsetY=nativeEvent.offsetY;contextRef.current.lineTo(offsetX,offsetY);contextRef.current.stroke();// setPoints([...points, { offsetX, offsetY, formData }]);\nsetPoints(function(prevState){return[].concat(_toConsumableArray(prevState),[{offsetX:offsetX,offsetY:offsetY,formData:formData}]);});};var drawPaths=function drawPaths(newPathAry){// delete everything\ncontextRef.current.clearRect(0,0,canvas.width,canvas.height);// draw all the paths in the paths array\nnewPathAry.forEach(function(path){contextRef.current.beginPath();contextRef.current.moveTo(path[0].offsetX,path[0].offsetY);for(var i=1;i<path.length;i++){contextRef.current.strokeStyle=path[i].formData.color;contextRef.current.lineWidth=path[i].formData.stroke;contextRef.current.lineTo(path[i].offsetX,path[i].offsetY);}contextRef.current.stroke();});contextRef.current.strokeStyle=formData.color;contextRef.current.lineWidth=formData.stroke;};useEffect(function(){},[pathAry]);useEffect(function(){},[formData]);var Undo=function Undo(){// remove the last path from the paths array\nvar newPathAry=pathAry.slice(0,-1);setPathAry(newPathAry);// draw all the paths in the paths array\ndrawPaths(newPathAry);};var clearCanvas=function clearCanvas(){var canvas=canvasRef.current;var context=canvas.getContext(\"2d\");context.fillStyle=\"white\";context.fillRect(0,0,canvas.width,canvas.height);};return/*#__PURE__*/_jsxs(\"div\",{className:\"sketch\",children:[/*#__PURE__*/_jsx(StyleBar,{handleData:handleData,formData:formData}),/*#__PURE__*/_jsxs(\"div\",{id:\"sketchContainer\",children:[/*#__PURE__*/_jsx(\"canvas\",{className:\"canvas\",onMouseDown:startDrawing,onMouseUp:endDrawing,onMouseMove:draw,ref:canvasRef}),/*#__PURE__*/_jsxs(\"div\",{id:\"canvasControls\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"title\",htmlFor:\"title\",children:\"Title:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"inputField\",type:\"text\",name:\"title\",onChange:handleChange,placeholder:\"Your Masterpiece\"}),/*#__PURE__*/_jsx(\"button\",{className:\"saveBtn\",onClick:function onClick(e){return handleSave(e,title);},children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"clearBtn\",onClick:clearCanvas,children:\"Clear\"}),/*#__PURE__*/_jsx(\"button\",{className:\"undoBtn\",onClick:Undo,children:\"Undo\"})]})]})]});};export default SketchPad;","map":{"version":3,"sources":["/Users/Henry1/Development/code/Mod2/pictogram-client/src/Components/SketchPad.js"],"names":["React","useEffect","useRef","useState","StyleBar","SketchPad","handleSave","canvasRef","contextRef","isDrawing","setIsDrawing","canvas","setCanvas","title","setTitle","points","setPoints","pathAry","setPathAry","color","stroke","formData","setFormData","handleData","e","prevState","target","name","value","handleChange","newCanvas","current","width","height","style","border","fillStyle","context","getContext","scale","lineCap","strokeStyle","lineWidth","startDrawing","nativeEvent","offsetX","offsetY","beginPath","moveTo","endDrawing","closePath","draw","lineTo","drawPaths","newPathAry","clearRect","forEach","path","i","length","Undo","slice","clearCanvas","fillRect"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport StyleBar from \"./StyleBar\";\nconst SketchPad = ({ handleSave }) => {\n  const canvasRef = useRef(null);\n  const contextRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [canvas, setCanvas] = useState(null);\n  const [title, setTitle] = useState(\"\");\n  const [points, setPoints] = useState([]);\n  const [pathAry, setPathAry] = useState([]);\n\n  const [formData, setFormData] = useState({\n    color: \"black\",\n    stroke: 3,\n  });\n\n  const handleData = (e) => {\n    setFormData((prevState) => ({\n      ...prevState,\n      [e.target.name]: e.target.value,\n    }));\n  };\n  const handleChange = (e) => {\n    setTitle(e.target.value);\n  };\n\n  useEffect(() => {\n    const newCanvas = canvasRef.current;\n    newCanvas.width = 500;\n    newCanvas.height = 500;\n    newCanvas.style.width = `${500}px`;\n    newCanvas.style.height = `${500}px`;\n    newCanvas.style.border = \"3px solid black\";\n    newCanvas.fillStyle = \"white\";\n    setCanvas(newCanvas);\n  }, []);\n  useEffect(() => {\n    if (canvas) {\n      const context = canvas.getContext(\"2d\");\n      context.scale(1, 1);\n      context.lineCap = \"round\";\n      context.strokeStyle = formData.color;\n      context.lineWidth = formData.stroke;\n      context.fillStyle = \"white\";\n      contextRef.current = context;\n    }\n  }, [canvas, formData.color, formData.stroke]);\n\n  const startDrawing = ({ nativeEvent }) => {\n    const { offsetX, offsetY } = nativeEvent;\n    contextRef.current.beginPath();\n    contextRef.current.moveTo(offsetX, offsetY);\n    setIsDrawing(true);\n    setPoints([]);\n  };\n  const endDrawing = () => {\n    contextRef.current.closePath();\n    setIsDrawing(false);\n    setPathAry((prevState) => [...prevState, points]);\n  };\n  const draw = ({ nativeEvent }) => {\n    if (!isDrawing) {\n      return;\n    }\n    const { offsetX, offsetY } = nativeEvent;\n    contextRef.current.lineTo(offsetX, offsetY);\n    contextRef.current.stroke();\n    // setPoints([...points, { offsetX, offsetY, formData }]);\n    setPoints((prevState) => [...prevState, { offsetX, offsetY, formData }]);\n  };\n\n  const drawPaths = (newPathAry) => {\n    // delete everything\n    contextRef.current.clearRect(0, 0, canvas.width, canvas.height);\n    // draw all the paths in the paths array\n    newPathAry.forEach((path) => {\n      contextRef.current.beginPath();\n      contextRef.current.moveTo(path[0].offsetX, path[0].offsetY);\n      for (let i = 1; i < path.length; i++) {\n        contextRef.current.strokeStyle = path[i].formData.color;\n        contextRef.current.lineWidth = path[i].formData.stroke;\n\n        contextRef.current.lineTo(path[i].offsetX, path[i].offsetY);\n      }\n      contextRef.current.stroke();\n    });\n    contextRef.current.strokeStyle = formData.color;\n    contextRef.current.lineWidth = formData.stroke;\n  };\n\n  useEffect(() => {}, [pathAry]);\n\n  useEffect(() => {}, [formData]);\n\n  const Undo = () => {\n    // remove the last path from the paths array\n\n    const newPathAry = pathAry.slice(0, -1);\n    setPathAry(newPathAry);\n    // draw all the paths in the paths array\n    drawPaths(newPathAry);\n  };\n\n  const clearCanvas = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext(\"2d\");\n    context.fillStyle = \"white\";\n    context.fillRect(0, 0, canvas.width, canvas.height);\n  };\n\n  return (\n    <div className=\"sketch\">\n      <StyleBar handleData={handleData} formData={formData} />\n      <div id=\"sketchContainer\">\n        <canvas\n          className=\"canvas\"\n          onMouseDown={startDrawing}\n          onMouseUp={endDrawing}\n          onMouseMove={draw}\n          ref={canvasRef}\n        />\n        <div id=\"canvasControls\">\n          <label className=\"title\" htmlFor=\"title\">\n            Title:\n          </label>\n          <input\n            className=\"inputField\"\n            type=\"text\"\n            name=\"title\"\n            onChange={handleChange}\n            placeholder=\"Your Masterpiece\"\n          />\n          <button className=\"saveBtn\" onClick={(e) => handleSave(e, title)}>\n            Save\n          </button>\n          <button className=\"clearBtn\" onClick={clearCanvas}>\n            Clear\n          </button>\n          <button className=\"undoBtn\" onClick={Undo}>\n            Undo\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SketchPad;\n"]},"metadata":{},"sourceType":"module"}